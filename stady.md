# 设计模式之美--重点学习笔记

## 3. 设计原则与思想：面向对象
##### 面向对象定义：
**面向对象编程是一种编程范式或编程风格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石 。**
**面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言**

*按照严格的定义，很多语言都不能算得上面向对象编程语言，但按照不严格的定义来讲，现在流行的大部分编程语言都是面向对象编程语言。*

##### 面向对象设计
一个系统由许许多多小的功能模块组成，每个功能模块又由很多的类组成，每个类负责实现什么功能，这就是面向对象分析。将系统如何拆分成模块，模块又如何拆分成一个个的类，类与类之间又如何交互，这就是面向对象设计。

##### 封装
**定义：** 封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类提供的方式（或者叫函数）来访问内部信息或者数据。
**意义：** 一方面是保护数据不被随意修改，提高代码的可维护性；另一方面是仅暴露有限的必要接口，提高类的易用性。

##### 抽象
**定义：** 封装主要讲的是如何隐藏信息、保护数据，而抽象讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。
**意义：** 一方面是提高代码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另一方面，它也是处理复杂系统的有效手段，能有效地过滤掉不必要关注的信息。

##### 继承
**定义** 继承是用来表示类之间的 is-a 关系，继承可以分为两种模式，单继承和多继承。单继承表示一个子类只继承一个父类，多继承表示一个子类可以继承多个父类。
**意义：** 好处：继承最大的好处就是代码复用。坏处：过度使用继承 ，继承层次过深过于复杂，就会导致代码可读性、可维护性变差。
*要多用组合，少用继承*

##### 多态
**定义：** 多态就是子类可以替代父类，父类和子类的实例对象都可以调用父类和子类特有的方法。
**意义：** 多态特性能提高代码的可扩展性和复用性。
实现多态的三个语法机制
+ 第一个语法机制是编程语言要支持父类对象可以引用子类对象。
+ 第二个语法机制是编程语言要支持继承。
+ 第三个语法机制是编程语言要支持子类可以重写（override）父类中的方法。



## 3. 设计原则与思想：设计原则
**设计原则包括：SOLID、KISS、YAGNI、DRY、LOD 等。**
#### SOLID
**S**ingle Responsibility Principle（单一职责原则）
**O**pen Closed Principle（开闭原则）
**L**iskov Substitution Principle（里氏替换原则）
**I**nterface Segregation Principle（接口隔离原则）
**D**ependency Inversion Principle（依赖倒置原则）

### 单一职责原则（SRP）
**定义：**一个类只负责完成一个职责或者功能。不要设计大而全的类，要设计粒度小、功能单一的类。
**意义：**单一职责原则是为了实现代码高内聚、低耦合，提高代码的复用性、可读性、可维护性。

**类的指责是否单一判断依据：**不同的应用场景、不同阶段的需求背景、不同的业务层面，对同一个类的职责是否单一，可能会有不同的判定结果。实际上，一些侧面的判断指标更具有指导意义和可执行性，比如，出现下面这些情况就有可能说明这类的设计不满足单一职责原则：
+类中的代码行数、函数或者属性过多；
+类依赖的其他类过多，或者依赖类的其他类过多；
+私有方法过多；
+比较难给类起一个合适的名字；
+类中大量的方法都是集中操作类中的某几个属性。

### 开闭原则（OCP）
**定义：**软件实体（模块、类、方法等）应该“对扩展开放、对修改关闭”。
**如何理解：**添加一个新的功能，应该是通过在已有代码基础上扩展代码（新增模块、类、方法、属性等），而非修改已有代码（修改模块、类、方法、属性等）的方式来完成。关于定义，我们有两点要注意。第一点是，开闭原则并不是说完全杜绝修改，而是以最小的修改代码的代价来完成新功能的开发。第二点是，同样的代码改动，在粗代码粒度下，可能被认定为“修改”；在细代码粒度下，可能又被认定为“扩展”。
**如何做到开闭原则：**
1. 时刻具备扩展意识、抽象意识、封装意识。
2. 提高代码扩展性；最常用来提高代码扩展性的方法有：多态、依赖注入、基于接口而非实现编程，以及大部分的设计模式（比如，装饰、策略、模板、职责链、状态）。

### 里式替换原则（LSP）
**定义：**子类对象能够替换程序中父类对象出现的任何地方，并且保证原来程序的逻辑行为不变及正确性不被破坏。
**意义：**里式替换原则是用来指导，继承关系中子类该如何设计的一个原则。理解里式替换原则，最核心的就是理解“design by contract，按照协议来设计”这几个字。父类定义了函数的“约定”（或者叫协议），那子类可以改变函数的内部实现逻辑，但不能改变函数原有的“约定”。这里的约定包括：函数声明要实现的功能；对输入、输出、异常的约定；甚至包括注释中所罗列的任何特殊说明。
**里式替换原则与多态之间的区别：**
虽然从定义描述和代码实现上来看，多态和里式替换有点类似，但它们关注的角度是不一样的。多态是面向对象编程的一大特性，也是面向对象编程语言的一种语法。它是一种代码实现的思路。而里式替换是一种设计原则，用来指导继承关系中子类该如何设计，子类的设计要保证在替换父类的时候，不改变原有程序的逻辑及不破坏原有程序的正确性。


### 接口隔离原则（ISP）
**定义：**客户端不应该被强迫依赖它不需要的接口。其中的“客户端”，可以理解为接口的调用者或者使用者。
**如何理解：**理解“接口隔离原则”重点是理解其中的“接口”二字：
1. 如果把“接口”理解为一组接口集合，可以是某个微服务的接口，也可以是某个类库的接口等。如果部分接口只被部分调用者使用，我们就需要将这部分接口隔离出来，单独给这部分调用者使用，而不强迫其他调用者也依赖这部分不会被用到的接口。
2. 如果把“接口”理解为单个 API 接口或函数，部分调用者只需要函数中的部分功能，那我们就需要把函数拆分成粒度更细的多个函数，让调用者只依赖它需要的那个细粒度函数。
3. 如果把“接口”理解为 OOP 中的接口，也可以理解为面向对象编程语言中的接口语法。那接口的设计要尽量单一，不要让接口的实现类和调用者，依赖不需要的接口函数。

**接口隔离原则与单一职责原则之间的区别：**
单一职责原则针对的是模块、类、接口的设计。接口隔离原则相对于单一职责原则，一方面更侧重于接口的设计，另一方面它的思考角度也是不同的。接口隔离原则提供了一种判断接口的职责是否单一的标准：通过调用者如何使用接口来间接地判定。如果调用者只使用部分接口或接口的部分功能，那接口的设计就不够职责单一。

### 依赖倒置原则（DIP）
**定义：**高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖于细节；细节应该依赖于抽象。
**意义：**依赖倒置原则是面向对象设计的五大设计原则之一，其核心思想是面向接口编程，即面向抽象编程。